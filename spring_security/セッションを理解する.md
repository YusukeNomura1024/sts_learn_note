## セッションを理解する
### セッションとは？
* httpはステートレスのため状態を維持することができない
    * ログインしたユーザーと今リクエストを送ってきたユーザーが同じか判断ができない
    * つまりログイン認証が通っていても、認証が通ったという状態が維持できない
    * httpだけではだめ
* セッションを実現させるためにcookieを実装している
    * Cookieヘッダーにhoge=xyzというのが登録されると、その後はしばらくcookieヘッダーに登録される状態が続き、常にサーバーに送信される

* ログイン情報を維持する仕組み
1. サーバーでセッションIDを発行
1. レスポンスのSet-Cookieヘッダーに発行されたセッションIDが登録される
1. ブラウザーのcookieにもセッションIDが登録される
1. 以降のリクエストでは、cookieヘッダーにセッションIDが登録された状態になる
1. リクエストヘッダーのcookieに登録されているセッションIDとサーバー内のセッション情報を照合してログイン済みか判定する

### cookieをデバックしよう
* EditThisCookieというクロムの拡張機能を追加する
* セッションの動作をデバックする
    * レスポンスにSet-Cookieヘッダーが追加されていることを確認
        * 検証でネットワークからヘッダーズのレスポンスヘッダーを確認すると、Set-Cookieに値が追加されています。（Set-Cookie: JSESSIONID=XXXXXXX）
        

    * ブラウザーのcookieにもセッションIDが登録されている
        * この状態でアドオンのクッキーを開くと、Set-Cookieと同じJSESSIONIDが登録されています。
    * リクエストにCookieヘッダーがついている
        * ログイン後のヘッダーズのリクエストヘッダーを確認すると、Cookieという値で同じく、JSESSIONIDが登録されています。


### セッションのセキュリティ要件
* セッションIDが推測が困難であること
    * ログインした順に1つずつ数字が増えていくという方式だと、推測しやすくなってしまう
    * springのセッションIdを確認してみるとログインするたびに全く異なるものが発行されていることがわかる
    